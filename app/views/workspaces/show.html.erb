<div  data-no-turbolink>
  <h1 class="showtitle"><%= @workspace.name %></h1>

  <% if !@reviews.blank? %>
    <h2>Average Rating: </h2>
    <p><span id="average_rating"></span> (<%= @reviews.count %> <%= @reviews.count != 1 ? "Reviews" : "Review" %>)</p>
  <% end %>


  <ul>
      <%= image_tag @workspace.image_url, class: "showimg" %>
      <li><%= link_to @workspace.name, @workspace %></li>
      <li><%= @workspace.address %></li>
      <li><%= @workspace.category %></li>
      <li><%= link_to "Workspace website", @workspace.company_url %></li>
      <li><%= @workspace.hours %></li>
  </ul>

    <div class="reviews-header">
      <h3>Reviews</h3>
    </div>
    <div class="reviews-list">
      <%= render "reviews/index" %>
    </div>
    <div class="reviews-new">
      <% if !@hasReview && current_user %>
        <%= render "reviews/form" %>
      <% elsif !current_user %>
        <p>
          Please log in to leave a review!
        </p>
      <% end %>
    </div>

    <div id="map-container" data-no-turbolink>
      <div id="map-canvas"></div>
    </div>
</div>
  <style>
    #map-container {
       height: 400px;
       border-radius: 16px 16px;
       border-color: #fff;
       border-style: solid;
       box-shadow: 2px 2px 10px #B1B1B1;
       margin-top: 25px;
       margin-bottom: 25px;
       margin-left: 6em;
       margin-right: 6em;
       border-width: 7px;
     }
     #map-canvas {
       height: 384px;
       width: 100%;
     }
  </style>

  <script src="https://maps.googleapis.com/maps/api/js"></script>
  <script>
    function initialize() {
      var mapCanvas = document.getElementById('map-canvas');
      var mapOptions = {
        center: new google.maps.LatLng(38.904854, -77.03394000000003),
        zoom: 15,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(mapCanvas, mapOptions);
      var marker = new google.maps.Marker({
      	position: new google.maps.LatLng(38.904854, -77.03394000000003),
      	title: "Learning at GA!"
      });
      marker.setMap(map);
    }
    google.maps.event.addDomListener(window, 'load', initialize);
  </script>


<script>
  $('#average_rating').raty({
    path: '/assets',
    readOnly: true,
    score: <%= @workspace.average_rating %>
  })
</script>
